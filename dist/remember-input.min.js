!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Remember=t()}(this,(function(){"use strict";var e=function(e){return document.querySelector(".".concat(e))};var t,a,n,r,o,c=(r=window.location,o=r.hostname+r.pathname.substr(0,40),"rememberjs_"+(t=o,a="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",n=new RegExp(a.split("").join("|"),"g"),t.toString().toLowerCase().replace(/\s+/g,"").replace(n,(function(e){return"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(a.indexOf(e))})).replace(/&/g,"").replace(/-/g,"").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"").replace(/^-+/,"").replace(/-+$/,""))),i=function(){return"undefined"==typeof Storage},u=function(){return localStorage.getItem(c)},l=function(e,t){var a=localStorage.getItem(c);if(a){var n=JSON.parse(a);n[e]=t,localStorage.setItem(c,JSON.stringify(n))}else{var r=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},e,t);localStorage.setItem(c,JSON.stringify(r))}},s=function(e){var t=u();return t?JSON.parse(t)[e]:null},f=function(){localStorage.removeItem(c)},d=function(e){var t=e.getAttribute("name"),a=s(t);a&&(e.value=a)};var g=[],m={selector:"remember-input",storeTrigger:"change",clearOnSubmit:!1,handleSubmit:!0,onSubmit:function(){console.warn("Define a callback to handle for submission.")},disabledLocalStorage:!1,exclude:[],disabled:!1},b=["change"],p=function(e){g.forEach((function(t){var a=t.node;""!==a.name&&null!==a.name?a.addEventListener(e,(function(e){var t=e.target.name;if(!(m.exclude.indexOf(t)>-1))switch(e.target.tagName.toLowerCase()){case"input":switch(e.target.type){case"checkbox":var a=e.target.checked?"true":"false";l(t,a);break;case"file":case"file":case"reset":case"button":break;default:l(t,e.target.value)}break;default:l(e.target.name,e.target.value)}})):console.warn("A ".concat(a.tagName.toLowerCase()," element with no name attribute was found. This input value will not be remembered"))}))},v=function(){m.clearOnSubmit&&f(),e(m.selector).submit()},h=function(){var t;(t=m.selector,"form"!==e(t).tagName.toLowerCase())?console.error('Element with classname "'.concat(m.selector,'" is not a form')):e(m.selector).addEventListener("submit",(function(e){e.preventDefault(),m.onSubmit(e,u()?JSON.parse(u()):null,v)}))},S=function(){g.forEach((function(e){var t=e.node;switch(t.tagName.toLowerCase()){case"input":switch(t.type){case"checkbox":!function(e){var t=e.getAttribute("name"),a=s(t);a&&(e.checked=function(e){return"true"===e}(a))}(t);break;case"radio":!function(e){var t=e.getAttribute("name"),a=s(t);if(a){if(a==e.value)return e.checked=!0;e.checked=!1}}(t);break;default:d(t)}break;default:d(t)}}))};return{init:function(t){if(m=Object.assign(m,t),a=m.selector,e(a)){var a;if(g=function(t){var a=e(t).querySelectorAll("input, select, textarea");return Array.prototype.map.call(a,(function(e){return{node:e}}))}(m.selector),!m.disabledLocalStorage&&i()&&(console.info("Storage is not supported on this browser"),m.disabledLocalStorage=!0),m.disabled||i())return disabled();S(),-1===b.indexOf(m.storeTrigger)?(console.warn('Store event trigger "'.concat(m.storeTrigger,'" is invalid falling back to default')),p("change")):p(m.storeTrigger),m.handleSubmit&&h(),!m.handleSubmit&&m.clearOnSubmit&&e(m.selector).addEventListener("submit",(function(){f()}))}else console.error('class "'.concat(m.selector,'" not found'))}}}));
